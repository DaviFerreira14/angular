<main
  class="container-fluid dashboard-bg text-white min-vh-100"
  [ngStyle]="{
    'background-image': 'url(' + selectedCarData?.img + ')',
    'background-size': '50%',
    'background-position': 'center',
    'background-repeat': 'no-repeat',
  }"
>
  <button
    class="btn btn-outline-light border-1 m-3"
    type="button"
    data-bs-toggle="offcanvas"
    data-bs-target="#sidebarMenu"
    aria-controls="sidebarMenu"
  >
    &#9776;
  </button>

  <div
    class="offcanvas offcanvas-start"
    tabindex="-1"
    id="sidebarMenu"
    aria-labelledby="sidebarMenuLabel"
  >
    <div class="offcanvas-header">
      <img
        src="ford.png"
        alt="Logo FORD"
        class="offcanvas-title img-fluid w-50 d-none d-sm-block"
      />
      <button
        type="button"
        class="btn-close text-reset"
        data-bs-dismiss="offcanvas"
        aria-label="Close"
      ></button>
    </div>

    <div class="offcanvas-body">
      <ul class="nav flex-column">
        <li class="nav-item mb-2">
          <a
            class="nav-link text-success bg-light rounded p-2"
            [routerLink]="['/home']"
            >Home</a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link text-success bg-light rounded p-2"
            [routerLink]="['/dashboard']"
            >Dashboard</a
          >
        </li>
      </ul>
    </div>
  </div>

  <h1 class="text-center text-primary">Dashboard FORD</h1>

  <div class="d-flex justify-content-center flex-wrap mt-4 gap-5">
    <div class="card text-center shadow-sm p-3">
      <h6 class="text-muted">Veículo</h6>
      <hr />
      <select
        class="form-select mt-2"
        [(ngModel)]="selectedCar"
        (ngModelChange)="loadVinData($event)"
      >
        <option *ngFor="let carro of carros" [value]="carro.vehicle">
          {{ carro.vehicle }}
        </option>
      </select>
    </div>

    <div class="card text-center shadow-sm p-3" *ngIf="selectedCarData">
      <h6 class="text-muted">Total de Vendas</h6>
      <hr />
      <h4 class="text-primary mt-2">{{ selectedCarData.volumetotal }}</h4>
      <small class="text-muted">Unid.</small>
    </div>

    <div class="card text-center shadow-sm p-3" *ngIf="selectedCarData">
      <h6 class="text-muted">Conectados</h6>
      <hr />
      <h4 class="text-primary mt-2">{{ selectedCarData.connected }}</h4>
      <small class="text-muted">Unid.</small>
    </div>

    <div class="card text-center shadow-sm p-3" *ngIf="selectedCarData">
      <h6 class="text-muted">Update Software</h6>
      <hr />
      <h4 class="text-primary mt-2">{{ selectedCarData.softwareUpdates }}</h4>
      <small class="text-muted">Unid.</small>
    </div>
  </div>

  <div class="fixed-bottom bg-primary" style="width: 100%; z-index: 1030">
    <table class="table table-striped table-bordered table-primary m-0">
      <thead>
        <tr>
          <th scope="col">Código - VIN</th>
          <th scope="col">Odômetro</th>
          <th scope="col">Nível de combustível</th>
          <th scope="col">Status</th>
          <th scope="col">Lat.</th>
          <th scope="col">Long.</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vinData of vinDataList">
          <td class="table-light">{{ vinData.vin }}</td>
          <td class="table-light" *ngIf="!vinData.erro">
            {{ vinData.odometro }}
          </td>
          <td class="table-light" *ngIf="!vinData.erro">
            {{ vinData.nivelCombustivel }}%
          </td>
          <td class="table-light" *ngIf="!vinData.erro">
            {{ vinData.status }}
          </td>
          <td class="table-light" *ngIf="!vinData.erro">{{ vinData.lat }}</td>
          <td class="table-light" *ngIf="!vinData.erro">{{ vinData.long }}</td>

          <ng-container *ngIf="vinData.erro">
            <td class="text-danger" colspan="5">VIN não encontrado</td>
          </ng-container>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
</main>
